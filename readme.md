<<<<<<< HEAD
# PromptCraft - 提示词管理助手

> **当前版本**: v0.1.5  
> **更新时间**: 2025-06-12

一个功能强大的 Chrome 浏览器扩展，专为管理和组织 AI 提示词而设计。支持本地存储、JSON导入导出、右键快速添加等功能，无需注册登录，保护您的隐私。
=======
# 🚀 Prompt管理助手 (PromptCraft)

> **当前版本**: v0.5.1  
> **更新时间**: 2025-06-17

一个功能强大的 Chrome 浏览器扩展，专为管理和组织 AI 提示词而设计。支持本地存储、JSON导入导出、右键快速添加、骨架屏加载等功能，无需注册登录，保护您的隐私。实现了"秒开"的用户体验，彻底解决了首次打开时的白屏等待问题。
>>>>>>> chonggoujiegou

## ✨ 主要功能

### 📝 提示词管理
- **添加提示词**: 支持标题、内容、分类的完整信息录入
- **编辑修改**: 随时编辑已保存的提示词内容
- **快速删除**: 安全删除不需要的提示词，带确认提示
- **一键复制**: 快速复制提示词内容到剪贴板
- **右键添加**: 在任意网页选中文本后右键快速添加到提示词
<<<<<<< HEAD
=======
- **快速调用**: 支持快捷键快速调用提示词，智能目标锁定和文本插入
- **跨框架兼容**: 优化的文本插入机制，支持各种前端框架和输入组件
>>>>>>> chonggoujiegou
- **默认提示词**: 内置高质量的专业提示词，包括AI绘画、学习助手、产品分析等多个领域

### 🏷️ 智能分类
- **分类管理**: 为提示词添加自定义分类标签
- **下拉选择**: 支持从已有分类中选择或输入新分类
- **分类筛选**: 按分类快速筛选查看相关提示词

### 🔍 搜索功能
- **全文搜索**: 支持在标题、内容、分类中搜索关键词
- **智能搜索**: 输入1个字符即可开始搜索，300ms延迟优化体验
- **实时筛选**: 输入即时显示匹配结果

### 📊 数据管理
- **JSON导出**: 将所有提示词导出为JSON文件（Prompt管理助手_提示词.json）
- **JSON导入**: 从JSON文件批量导入提示词，支持智能更新策略
- **模板下载**: 提供标准JSON模板，包含必填字段说明
- **导入统计**: 显示导入成功/失败数量，支持下载失败记录
- **失败分析**: 失败记录包含详细的失败原因说明

### 🎨 用户体验
<<<<<<< HEAD
=======
- **骨架屏加载**: 首次打开时显示优雅的骨架屏占位符，实现"秒开"体验
>>>>>>> chonggoujiegou
- **智能主题**: 支持跟随系统、浅色、深色三种主题模式
- **主题图标**: 浅色模式显示月亮图标，深色模式显示太阳图标
- **预览功能**: 点击卡片可预览提示词，标题和按钮固定不滚动
- **响应式设计**: 优雅的卡片式布局，信息展示清晰
- **本地存储**: 所有数据保存在本地，无需联网，保护隐私
- **侧边栏集成**: 作为 Chrome 侧边栏运行，不干扰正常浏览
<<<<<<< HEAD
- **设置面板**: 右上角齿轮图标，提供数据管理功能
=======
- **跨iframe支持**: 全框架覆盖，支持复杂网页结构中的文本插入
- **目标锁定**: 智能元素定位和锁定机制，确保文本插入准确性
- **设置面板**: 右上角齿轮图标，提供数据管理功能
- **性能优化**: 重构加载流程，async/await数据获取，统一chrome.storage.local数据源
>>>>>>> chonggoujiegou

## 🚀 安装使用

### 安装步骤
1. 下载项目文件到本地
2. 打开 Chrome 浏览器，进入扩展管理页面 (`chrome://extensions/`)
3. 开启「开发者模式」
4. 点击「加载已解压的扩展程序」
5. 选择项目文件夹
6. 安装完成后，点击扩展图标或使用快捷键打开侧边栏

### 使用方法
1. **添加提示词**: 点击「添加新提示词」按钮，填写标题和内容（必填），可选择或输入分类
2. **右键快速添加**: 在任意网页选中文本后右键选择「添加到PromptCraft」，自动填入内容
3. **管理提示词**: 在主界面查看所有提示词，使用编辑、删除、复制功能
4. **搜索筛选**: 使用搜索框查找特定提示词，或点击分类标签筛选
5. **主题切换**: 点击右上角主题图标循环切换（跟随系统→浅色→深色→跟随系统）
6. **预览查看**: 点击提示词卡片可预览完整内容，支持复制和关闭操作
7. **数据管理**: 点击右上角齿轮图标打开设置面板，进行导入导出操作

### JSON数据管理
1. **下载模板**: 在设置面板点击「下载模板」获取标准JSON模板
2. **导入数据**: 
   - 按模板格式填写JSON文件（标题、内容为必填，分类可选）
   - 点击「导入」选择文件进行批量导入
   - 查看导入结果统计（总数、成功数、失败数）
   - 可选择下载失败记录查看具体失败原因
3. **导出数据**: 点击「导出」将所有提示词保存为JSON文件

## 📋 功能特性

### 表单验证
- 标题和内容为必填项，红色星号前置显示更醒目
- 分类为可选项，支持下拉选择和手动输入
- 表单标签字体加粗，提升可读性

### 交互优化
- 自定义确认弹窗，在侧边栏内显示，避免浏览器原生弹窗
- 预览弹窗采用固定布局，标题和操作按钮不随内容滚动
- 深色主题下弹窗按钮颜色优化，确保可读性
- 删除操作带安全确认，防止误操作
- 分类建议悬停效果优化，暗黑模式下背景色正确显示

### 数据管理
- 智能数据状态管理，区分首次使用和清空数据状态
- 删除所有提示词后不会自动恢复示例数据
- 本地存储持久化，浏览器重启后数据保持

## 📝 更新日志

<<<<<<< HEAD
=======
### v0.5.1 (2025-06-17)
- 📋 **提示词排序优化**: 新创建的提示词现在会自动显示在列表顶部，按创建时间降序排列
- 🎨 **主题选择器重设计**: 重新设计外观设置布局，图标和文字现在在同一行显示，提升用户体验
- 🔧 **界面布局改进**: 优化设置面板中主题选择器的视觉效果，增加图标大小和间距
- ✨ **用户体验提升**: 改善设置界面的可用性，让主题切换更加直观和便捷
- 🎯 **文本插入逻辑**: 确保"pp"快速调用功能的文本插入格式与复制按钮保持一致

### v0.5.0 (2025-06-16)
- 🚀 **重大架构重构**: 简化扩展整体架构，移除不必要的复杂性，提升系统性能和稳定性
- 🔒 **本地存储增强**: 优化Chrome Storage API使用机制，提升数据读写效率和安全性
- 🛡️ **隐私保护升级**: 强化用户数据隐私保护，确保所有数据仅在本地处理，无任何外部传输
- 🏗️ **界面流程简化**: 优化用户操作流程，移除不必要的认证步骤，提供更直接的使用体验
- ⚡ **启动性能优化**: 减少外部依赖库，显著提升扩展启动速度和响应性能
- 🧹 **代码质量提升**: 大规模代码重构和清理，移除冗余代码，提升代码可维护性
- 📝 **权限配置精简**: 优化manifest.json配置，移除不必要的权限申请，降低安全风险
- 🔧 **依赖管理优化**: 精简package.json依赖项，减少包体积，提升安装和更新速度

### v0.1.9 (2025-06-14)
- 🚀 **重大性能优化**: 实现骨架屏加载，彻底解决首次打开2-3秒白屏问题
- ⚡ **"秒开"体验**: 用户打开侧边栏时立即看到优雅的骨架屏占位符
- 🎨 **骨架屏设计**: 添加4个静态骨架卡片，包含标题、按钮、分类、内容行等完整占位符
- 🔄 **加载流程重构**: 移除setTimeout延迟，改为完全async/await实现
- 📊 **数据获取优化**: 先从chrome.storage.local获取数据，再进行渲染
- 🎭 **动画效果**: 骨架屏采用平滑脉冲动画，支持明暗主题切换
- 🧹 **代码优化**: 清理冗余代码，优化初始化流程，提升整体性能
- 💾 **数据源统一**: 确保所有组件都使用chrome.storage.local作为唯一数据源
- 🛡️ **错误处理**: 增强错误处理机制，即使加载失败也能提供友好提示

### v0.1.8 (2025-06-14)
- 🎨 优化了深色模式下的文本颜色显示，提升了可读性
- 🔧 修复了提示词标题和预览文本在深色背景下的颜色问题
- 📐 改进了主容器和子元素的盒模型设置，强制使用 `box-sizing: border-box`
- 🎯 优化了主容器的内边距设置，统一设为 12px
- 📱 移除了搜索容器、分类筛选和提示词列表的左右内边距，实现与主容器的完美对齐
- 🌐 确保了所有样式修改在普通模式和 iFrame 环境中都能正常生效
- ✨ 提升了整体界面的一致性和用户体验

### v0.1.7 (2025-06-14)
- 🔧 修复了目标锁定机制中的函数引用错误，解决了 `triggerComprehensiveEvents` 未定义的问题
- 🚀 优化了跨框架文本插入功能，提升了与各种前端框架的兼容性
- 🎯 增强了目标元素锁定机制，确保文本插入的准确性和稳定性
- 🌐 完善了跨iframe支持，通过manifest.json配置实现全框架覆盖
- 🎨 修复了iframe中的颜色主题问题，移除了强制主题覆盖逻辑，恢复原生CSS媒体查询主题检测
- 🔧 优化了iframe样式处理，保留滚动条隐藏功能的同时确保主题一致性
- 🧹 进行了大量代码清理工作，移除了冗余和孤立的代码片段
- 🔍 修复了语法错误，确保代码完整性和运行稳定性
- 📈 提升了整体性能和用户体验

### v0.1.6 (2025-06-13)
- 优化了扩展初始化架构，提升数据加载性能
- 新增默认提示词预加载机制，扩展启动时自动加载到内存
- 改进了错误处理逻辑，移除硬编码备用数据
- 新增用户友好的错误提示功能，加载失败时显示具体错误信息
- 优化了快速调用UI的数据加载策略，优先从内存读取数据
- 完善了manifest.json配置，确保资源文件正确访问
- 提升了整体用户体验和系统稳定性

>>>>>>> chonggoujiegou
### v0.1.5 
- 增加了提示词内容长度限制（10000字符）
- 新增实时字符计数显示功能
- 优化了提示词卡片预览高度，显示更多内容
- 更新了默认提示词库，新增多个高质量提示词
- 改进了用户体验和界面反馈

### v0.1.4
- 优化了界面布局和用户体验
- 修复了一些已知问题
- 增强了数据导入导出功能的稳定性

### v0.1.3
- 新增右键菜单快速添加提示词功能
- 优化了搜索功能的性能
- 改进了分类管理界面

### v0.1.2 
- 新增JSON格式导入导出功能
- 优化了提示词卡片的显示效果
- 修复了部分浏览器兼容性问题

### v0.1.1 
- 新增分类管理功能
- 优化了搜索算法
- 改进了界面响应速度

### v0.1.0 
- 首次发布
- 基础的提示词管理功能
- 本地存储支持
- 简洁的用户界面

## 🎨 Icon 设计要求

为了更好地体现 Prompt管理助手 的品牌形象，我们需要设计一套专业的图标。以下是设计要求：

### 设计理念
- **主题**: AI 提示词管理、创意工具、效率助手
- **风格**: 现代简约、专业可信、科技感
- **色彩**: 主色调建议使用紫色系 (#6366f1) 或蓝色系，体现科技和创新

### 图标规格
- **16x16px**: 浏览器工具栏小图标
- **32x32px**: 扩展管理页面图标
- **48x48px**: Chrome 网上应用店图标
- **128x128px**: 高分辨率展示图标

### 设计元素建议
- **核心元素**: 可考虑融入以下元素之一或组合
  - 魔法棒/法杖 (代表 AI 魔法)
  - 文档/纸张 (代表提示词文本)
  - 齿轮/工具 (代表效率工具)
  - 闪电/火花 (代表创意灵感)
  - 字母 "P" (Prompt管理助手 首字母)

### 技术要求
- **格式**: PNG 格式，透明背景
- **兼容性**: 在明暗两种主题下都要清晰可见
- **简洁性**: 在小尺寸下仍能保持清晰的识别度
- **一致性**: 不同尺寸保持设计风格统一

### 文件命名
- `icon16.png` - 16x16 像素
- `icon32.png` - 32x32 像素  
- `icon48.png` - 48x48 像素
- `icon128.png` - 128x128 像素

## 🛠️ 技术栈

<<<<<<< HEAD
- **前端**: HTML5, CSS3, JavaScript (ES6+)
- **存储**: Chrome Storage API (本地存储)
- **UI框架**: 原生 CSS，响应式设计
- **图标**: Font Awesome
- **浏览器**: Chrome Extension Manifest V3

## 🔧 技术实现

### 核心技术
- **前端框架**: 原生JavaScript + HTML5 + CSS3
- **数据存储**: Chrome Extension Local Storage API
- **数据处理**: 原生JSON处理，无需外部依赖
- **UI交互**: 现代化响应式设计
- **主题系统**: CSS变量 + 动态类切换

### 关键特性
- **轻量化设计**: 无需外部库，减少包大小和加载时间
- **错误处理**: 完善的异常捕获和用户友好的错误提示
- **数据验证**: 导入时严格验证JSON格式和必填字段
- **用户体验**: 加载状态提示、操作反馈、确认对话框
- **数据完整性**: 导入时保护现有数据，支持增量添加
- **响应式设计**: 适配不同尺寸的侧边栏窗口
=======
- **前端框架**: 原生JavaScript + HTML5 + CSS3
- **存储方案**: Chrome Storage API (纯本地)
- **UI组件**: 原生CSS + Font Awesome图标
- **构建工具**: 无需构建，直接加载
- **版本控制**: Git
- **架构模式**: 纯客户端应用，无服务器依赖
- **扩展标准**: Chrome Extension Manifest V3
- **性能优化**: async/await异步编程，骨架屏技术
- **主题系统**: CSS变量 + 媒体查询

## 🔧 技术实现

### 核心架构
- **Manifest V3**: Chrome扩展最新标准
- **Side Panel API**: 原生侧边栏集成
- **Storage API**: 纯本地数据存储
- **Context Menus**: 右键菜单快速访问
- **Content Scripts**: 跨网站智能文本插入

### 性能优化
- **骨架屏技术**: 优化加载体验
- **异步编程**: 防止界面阻塞
- **事件委托**: 高效内存管理
- **CSS动画**: 流畅交互效果
- **模块化架构**: 代码复用与维护

### 数据管理
- **本地存储**: Chrome Storage API
- **JSON格式**: 轻量级数据结构
- **分类系统**: 灵活组织管理
- **全文搜索**: 快速内容定位
- **数据迁移**: 版本升级兼容
- **导入导出**: 备份与恢复功能

### 关键特性
- **纯本地化**: 无服务器依赖，数据完全本地存储
- **高性能**: async/await异步架构，流畅用户体验
- **轻量级**: 零外部依赖，快速启动加载
- **安全隐私**: 数据不离开本地，完全私密
- **智能搜索**: 全文检索，快速定位内容
- **数据迁移**: 版本升级自动兼容处理
- **响应式UI**: 适配各种窗口尺寸
- **主题系统**: 明暗主题无缝切换
- **错误处理**: 完善的异常捕获机制
- **数据完整性**: 严格的JSON验证和备份
>>>>>>> chonggoujiegou

## 📁 项目结构

```
<<<<<<< HEAD
Prompt管理助手/
├── manifest.json          # 扩展配置文件
├── background.js          # 后台脚本（右键菜单）
├── sidepanel.html         # 侧边栏页面
├── sidepanel.js          # 侧边栏脚本
├── lib/
│   ├── supabase.js       # Supabase客户端库
│   └── json-utils.js     # JSON导入导出工具
├── icons/                # 扩展图标
│   ├── icon16.png
│   ├── icon32.png
│   ├── icon48.png
│   └── icon128.png
└── README.md             # 项目说明
=======
PromptCraft/
├── 📄 manifest.json          # Chrome扩展配置文件
├── 📄 package.json           # 项目依赖配置
├── 📄 README.md              # 项目说明文档
├── 📁 docs/                  # 文档目录
│   ├── 📄 FR1和FR2，统一数据格式 # 数据格式统一文档
│   ├── 📄 FR3数据服务.md     # 数据服务文档
│   ├── 📄 FR4核心功能与状态同步.md # 核心功能文档
│   ├── 📄 需求内容.md        # 项目需求文档
│   └── 📄 远程同步supabase.md # 远程同步文档(已停用)
├── 📁 assets/                # 静态资源目录
│   ├── 📁 icons/             # 图标文件目录
│   │   ├── 🖼️ icon16.png     # 16x16 主图标
│   │   ├── 🖼️ icon16-wu.png  # 16x16 备用图标
│   │   ├── 🖼️ icon32.png     # 32x32 图标
│   │   ├── 🖼️ icon48.png     # 48x48 图标
│   │   └── 🖼️ icon128.png    # 128x128 图标
│   └── 📁 data/              # 数据文件目录
│       └── 📄 default-prompts.json # 默认提示词数据
├── 📁 lib/                   # 第三方库目录(已清空)
└── 📁 src/                   # 源代码目录
    ├── 📄 background.js      # 后台脚本
    ├── 📄 content_script.js  # 内容脚本
    ├── 📁 utils/             # 工具函数目录
    │   ├── 📄 data-service.js # 数据服务工具
    │   ├── 📄 json-utils.js  # JSON处理工具
    │   └── 📄 uuid.js        # UUID生成工具
    └── 📁 sidepanel/         # 侧边栏界面
        ├── 📄 sidepanel.html # 主界面HTML
        ├── 📄 sidepanel.css  # 样式文件
        └── 📄 sidepanel.js   # 主要逻辑脚本
>>>>>>> chonggoujiegou
```

## 🔒 隐私保护

- **完全本地化**: 所有数据存储在用户本地，不上传到任何服务器
- **无需注册**: 无需创建账户或提供个人信息
- **离线可用**: 无需网络连接即可正常使用所有功能
- **数据控制**: 用户完全控制自己的数据，可随时删除

<<<<<<< HEAD
## 🎨 浏览器图标设计建议

### 当前图标问题分析
当前的浏览器图标在浏览器中显示时可能存在以下问题：
- **视觉占比偏小**：相比其他扩展图标，显得不够突出
- **对比度不足**：在浏览器工具栏中缺乏足够的视觉冲击力
- **细节过多**：在小尺寸下细节可能模糊不清

### 设计优化建议
1. **简化设计元素**
   - 减少细节，采用更简洁的图形设计
   - 使用更粗的线条和更大的图形元素
   - 确保在16x16像素下仍然清晰可辨

2. **增强视觉对比**
   - 采用高对比度的颜色组合
   - 使用深色背景配浅色图标，或浅色背景配深色图标
   - 考虑添加边框或阴影效果增强立体感

3. **优化图标比例**
   - 确保图标内容占据图标区域的80-90%
   - 避免过多的留白空间
   - 使用方形或圆形的基础形状作为背景

4. **多尺寸适配**
   - 为不同尺寸（16x16, 32x32, 48x48, 128x128）设计专门的版本
   - 在小尺寸版本中进一步简化设计
   - 确保在高DPI显示器上的清晰度

### 技术实现建议
- 使用SVG格式制作图标，确保在任何尺寸下都保持清晰
- 在manifest.json中提供多个尺寸的图标文件
- 考虑为深色模式和浅色模式提供不同的图标版本
=======



>>>>>>> chonggoujiegou

## 🤝 贡献指南

欢迎提交 Issue 和 Pull Request 来帮助改进 Prompt管理助手！

## 📄 许可证

本项目采用 MIT 许可证，详情请查看 LICENSE 文件。

---

**Prompt管理助手** - 让 AI 提示词管理变得简单高效！