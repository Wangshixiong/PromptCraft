---
alwaysApply: false
description: 
---
# 1. 核心理念 (Core Philosophy)

## 本地优先，可选同步
应用的核心体验必须保证在未登录/离线状态下功能的完整性。网络同步是用户可选择的增强功能，而非必要条件。

## 体验为王
始终追求极致的性能和用户体验。这包括"秒开"的响应速度、流畅的交互动画和简洁直观的界面设计。

## 安全透明
必须明确告知用户哪些数据将被同步。始终为用户提供可完全在本地使用的纯净模式。

## 渐进增强，最小影响
我们拥抱并引入现代化技术，但所有变更必须遵循最小化影响原则。新功能的开发不应破坏现有功能的稳定性。

# 2. 技术红线 (Technical Red Lines)

## UI技术栈演进策略

### 新功能标准
所有新开发的UI功能或组件，必须使用 Svelte 作为组件框架，并使用 Tailwind CSS 进行原子化样式开发。

### 保护遗留代码
严禁对现有的、使用原生JavaScript编写的旧UI代码进行重构，除非是必要的Bug修复。

### 底层核心
项目的非UI核心逻辑（如background.js中的事件处理）继续使用原生JavaScript (ES6+)。

### 扩展标准
必须遵循最新的 Chrome Extension Manifest V3 标准，以确保安全性、性能和长期兼容性。

### 统一数据入口
所有对存储（无论是本地chrome.storage还是远程数据库）的读写操作，都必须通过统一的数据服务模块 (src/utils/data-service.js) 进行，严禁在其他地方直接调用存储API。

# 3. 开发规范 (Development Standards)

## 核心数据结构
所有"提示词"(Prompt)数据对象必须严格遵循以下核心结构。所有字段的设计都旨在保证未来的可扩展性和数据一致性。

```json
{
  "id": "string (UUID)",
  "title": "string",
  "content": "string",
  "tags": "string[] | null",       // (从 'category' 升级) 多对多关系，用于灵活标记。可为空。
  "author": "string | null",      // (新增) 用于标记创作者或来源。可为空。
  "created_at": "string (ISO 8601)",
  "updated_at": "string (ISO 8601)",
  "is_deleted": "boolean"          // (建议增加) 软删除标记，用于同步和回收站等未来功能。
}
```

2.  **代码质量**:
    * **注释**: 所有新增函数必须有JSDoc风格的注释（说明功能、参数、返回值）。复杂的业务逻辑必须添加行内注释。
    * **异步**: 全项目统一使用 `async/await` 进行异步编程。

3.  **UI一致性**: 所有新增的UI组件必须：
    * 使用CSS Variables，同时适配**明亮**和**暗黑**两种主题。
    * 保持与项目现有UI（如卡片、按钮、间距）的设计风格一致。

# 4. 网络与安全 (Networking & Security)
1.  **功能定位**: 网络功能**仅用于**经用户授权的账户登录与数据同步。
2.  **逻辑隔离**: 所有网络请求、用户认证、数据同步的逻辑**必须**封装在独立的专用模块中，不得与核心的本地操作逻辑（如UI渲染、本地数据管理）随意耦合。
3.  **离线可用**: 必须确保在网络连接失败或用户未登录时，应用的本地功能**完全可用**。
4.  **冲突解决**: 在开发同步功能时，必须设计并实现一套清晰的本地与云端数据**合并与冲突解决**策略，以防止用户数据意外丢失。






